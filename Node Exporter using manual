Exporters are used to collect and expose the metrics from your host. These exposed metrics can be scraped by the promtheus.
One such popular exporter is Node exporter. Let's understand how to install and start the node exporter manually.

# Moving to the appropriate folder and downloading its binary from official website
cd /tools/
wget https://github.com/prometheus/node_exporter/releases/download/v1.7.0/node_exporter-1.7.0.linux-amd64.tar.gz
tar -xvf node_exporter-1.7.0.linux-amd64.tar.gz
cd node_exporter-1.7.0.linux-amd64/

# Allowing the ports at system level to enable access to node exporter 
sudo firewall-cmd --permanent --add-port=9100/tcp
sudo firewall-cmd --reload

# Modifying the prometheus.yml file to add node exporter metrics as an target endpoint
***********************************************************************************************       	   
	   scrape_configs:
       - job_name: "node"
         static_configs:
           - targets: ["localhost:9100"]
*********************************************************************************************** 

# Starting the node exporter manually
 ./node_exporter

# Verifying the endpoint in prometheus gui
targets --> http:localhost
 graph --> search for node , thus you have configured node exporter
 
Now lets create service for prometheus:




  125  cd /etc/systemd/system
  127  vi prometheus.service
**************************************************
[Unit]
Description=Prometheus Server
After=network.target

[Service]
User=prometheus
Group=prometheus
Type=simple
ExecStart=/tools/prometheus-2.49.0-rc.0.linux-amd64/prometheus \
    --config.file /tools/prometheus-2.49.0-rc.0.linux-amd64/prometheus.yml \
    --storage.tsdb.path /tools/prometheus-2.49.0-rc.0.linux-amd64/data \
    --web.console.templates=/tools/prometheus-2.49.0-rc.0.linux-amd64/consoles \
    --web.console.libraries=/tools/prometheus-2.49.0-rc.0.linux-amd64/console_libraries

[Install]
WantedBy=multi-user.target
***************************************************

  154  sudo useradd -r -s /bin/false prometheus
  155  sudo usermod -aG prometheus prometheus
  156  sudo chown -R prometheus:prometheus /tools/prometheus-2.49.0-rc.0.linux-amd64
  157  sudo systemctl daemon-reload
  158  sudo systemctl enable prometheus
  159  sudo systemctl start prometheus
  160  sudo systemctl status prometheus
 
 
if this doesn't wrk, then give full access to the tools , prom folder using chmod 777 command
 --storage.tsdb.path value can be fetched from the prom gui 


Now, lets create service for node_exporter



  164  sudo useradd --no-create-home --shell /bin/false node_exporter
  174  sudo usermod -aG node_exporter node_exporter
  165  cd node_exporter-1.7.0.linux-amd64/
  167  sudo chown node_exporter:node_exporter /tools/node_exporter-1.7.0.linux-amd64
  168  vi /etc/systemd/system/node_exporter.service
  
  
[Unit]
Description=Node Exporter
After=network.target

[Service]
User=node_exporter
Group=node_exporter
Type=simple
ExecStart=/tools/node_exporter-1.7.0.linux-amd64/node_exporter

[Install]
WantedBy=multi-user.target

  
  170  sudo systemctl daemon-reload
  176  sudo systemctl restart node_exporter
  171  sudo systemctl enable node_exporter
  172  sudo systemctl start node_exporter
  173  sudo systemctl status node_exporter


grafana server:



  304  wget -q -O gpg.key https://rpm.grafana.com/gpg.key
  305  sudo rpm --import gpg.key
  306  vi /etc/yum.repos.d/grafana.repo
  307  sudo dnf install grafana
  308  ls
  309  sudo systemctl enable grafana-server
  310  sudo systemctl start grafana-server
  311  sudo systemctl status grafana-server
  312  history

prom added as datasource to grafana:

To add Prometheus as a data source to Grafana, follow these steps:

Using Grafana UI:

Open Grafana in your web browser (usually at http://localhost:3000).
Click on the cogwheel icon in the sidebar to open the Configuration menu.
Select Data Sources.
Click on “Add data source”.
Choose “Prometheus” as the type.
Set the appropriate Prometheus server URL, such as http://localhost:9090/.
Click Save & Test.

explore --> up


------

add host as target to prom

install node and run it as service in host

prom ku : out 9100 hostip; host ku : in 9090 promip

prom.yml config

  - job_name: "heyhey"
    static_configs:
      - targets: ["3.15.34.142:9100"]

  157  sudo systemctl daemon-reload
  158  sudo systemctl enable prometheus
  159  sudo systemctl start prometheus
  160  sudo systemctl status prometheus
